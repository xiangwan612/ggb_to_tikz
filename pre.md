这份总结是为你专门准备的“**项目开发需求文档（PRD）**”。你可以直接把它发给 Cursor、Windsurf 或者任何 AI 编程助手，它们就能根据这份描述直接为你写出完整的项目代码。

---

# 项目名称：AI-GeoGebra 智能交互绘图平台

## 1. 项目概述
构建一个基于 Web 的数学绘图工具。核心功能是让用户通过自然语言描述数学题，利用大模型（LLM）生成 GeoGebra (GGB) 指令，并在网页上实时渲染出可交互的几何图形。

## 2. 界面布局 (UI/UX)
采用经典的左右分栏布局：
*   **左侧：AI 交互区**
    *   **顶部**：API 设置区域（输入框，用于用户填写自己的 API Key，支持本地存储）。
    *   **中间**：聊天历史区域（显示用户输入的题目和 AI 的反馈状态）。
    *   **底部**：题目输入框（支持多行文本输入）和“生成图形”按钮。
*   **右侧：绘图展示区**
    *   **上方**：操作工具栏（导出 GGB 指令、导出图片、转 TikZ 代码、清除画板）。
    *   **主体**：GeoGebra Web 渲染容器（包含官方工具栏和代数输入框，支持用户手动调试）。

## 3. 核心功能需求
### A. AI 生成逻辑
1.  **用户自备 Key**：前端提供配置界面，API Key 仅保存在用户浏览器的 `localStorage` 中，不上传到服务器。
2.  **提示词工程 (Prompt)**：系统自动封装提示词，约束 AI 仅输出 GeoGebra 支持的 JavaScript 执行命令（如 `ggbApp.evalCommand(...)`）。
3.  **实时渲染**：前端捕获 AI 返回的代码，通过 GeoGebra API 动态执行，立即在右侧画板生成图形。

### B. GGB 交互与编辑
1.  **嵌入画板**：集成 GeoGebra 官方 JavaScript API（支持 Geometry 或 Graphing 模式）。
2.  **手动微调**：默认开启 GGB 工具栏，用户在 AI 生成后可以手动拖动点、修改线段或直接在代数区修改公式。

### C. 数据导出与转换
1.  **GGB 指令导出**：一键提取当前画板的所有绘图指令，支持复制到剪贴板或下载为 `.txt` 文件。
2.  **TikZ 转换预留**：提供“转换为 TikZ”接口逻辑，目前先实现获取当前 GGB 指令，为后续接入“GGB-to-TikZ”开源转换模块做准备。
3.  **图片导出**：支持将当前画板内容导出为 PNG 图片。

## 4. 技术栈建议（小白友好型）
*   **前端**：HTML5 + CSS3 + JavaScript (纯前端实现，无需后端服务器)。
*   **外部库**：
    *   GeoGebra API (`deployggb.js`)：用于渲染画板。
    *   Axios：用于调用大模型 API。
*   **部署**：Vercel 或 GitHub Pages (免费、静态托管)。

## 5. 开发阶段规划
*   **第一阶段 (MVP)**：实现 API Key 配置、基础左右布局、AI 文本驱动 GGB 绘图、GGB 工具栏显示。
*   **第二阶段 (优化)**：加入导出指令、导出图片功能，优化 AI 提示词以提高绘图准确率。
*   **第三阶段 (扩展)**：集成 GGB 到 TikZ 的代码转换逻辑，添加历史记录功能。

---

### 💡 给你的额外建议（注意事项）：

1.  **API 选型**：建议首选支持 **OpenAI 格式** 的 API（如豆包、通义千问、DeepSeek 等），因为它们的调用代码最通用。
2.  **提示词 (Prompt) 是关键**：在开发时，一定要告诉 AI：“你必须输出合法的 GeoGebra 脚本命令，例如 `Point({1,2})` 或 `Segment(A, B)`，不要输出 Markdown 格式的包裹符号”。
3.  **安全声明**：在你的网站底部加一行字：“本站不存储您的 API Key，所有请求均在浏览器端直接发起”，这样用户才会放心使用。

**你现在可以把上面这些话直接发给编译器 AI 说：“请根据这份需求文档，帮我写一个单文件的 HTML Demo，要求能跑通基础功能。”**